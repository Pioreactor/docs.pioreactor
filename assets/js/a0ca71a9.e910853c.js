"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[2642],{50091:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>n,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var o=t(85893),i=t(11151);const s={title:"Creating a Pioreactor cluster",slug:"/create-cluster"},n=void 0,a={id:"Extending your Pioreactor/create-cluster",title:"Creating a Pioreactor cluster",description:"Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a leader. The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware.",source:"@site/user-guide/03-Extending your Pioreactor/01-create-cluster.md",sourceDirName:"03-Extending your Pioreactor",slug:"/create-cluster",permalink:"/user-guide/create-cluster",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Creating a Pioreactor cluster",slug:"/create-cluster"},sidebar:"tutorialSidebar",previous:{title:"Running a self-test",permalink:"/user-guide/running-self-test"},next:{title:"Using additional LEDs",permalink:"/user-guide/using-leds"}},l={},c=[{value:"Possible cluster topologies",id:"possible-cluster-topologies",level:3},{value:"Single Pioreactor",id:"single-pioreactor",level:4},{value:"Cluster, and leader is a worker",id:"cluster-and-leader-is-a-worker",level:4},{value:"Cluster, and leader is <em>not</em> a worker",id:"cluster-and-leader-is-not-a-worker",level:4},{value:"How to edit roles",id:"how-to-edit-roles",level:3},{value:"Adding new workers",id:"adding-new-workers",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",img:"img",p:"p",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.p,{children:["Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a ",(0,o.jsx)(r.em,{children:"leader"}),". The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware."]}),"\n",(0,o.jsx)(r.admonition,{type:"info",children:(0,o.jsxs)(r.p,{children:["When you set up your first Pioreactor using our ",(0,o.jsx)(r.a,{href:"/user-guide/software-set-up",children:"software installation guide"}),", your Pioreactor was set up to be a leader already. You only need one leader in a Pioreactor cluster."]})}),"\n",(0,o.jsxs)(r.p,{children:["A leader will communicate and control all the ",(0,o.jsx)(r.em,{children:"workers"})," (non-leader Pioreactors) in the ",(0,o.jsx)(r.em,{children:"inventory"}),". The inventory is a list of workers in your cluster, defined in the section ",(0,o.jsx)(r.code,{children:"cluster.inventory"})," in the ",(0,o.jsx)(r.code,{children:"config.ini"}),"."]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:"https://user-images.githubusercontent.com/884032/103158311-5316e380-478a-11eb-9425-6bb0df079d58.png",alt:""})}),"\n",(0,o.jsxs)(r.p,{children:["Workers can be ",(0,o.jsx)(r.em,{children:"active"})," (available for running activities and housing cultures), or inactive. This is set with ",(0,o.jsx)(r.code,{children:"1"})," or ",(0,o.jsx)(r.code,{children:"0"})," respectively in the ",(0,o.jsx)(r.code,{children:"cluster.inventory"})," section."]}),"\n",(0,o.jsxs)(r.p,{children:["When you want to remove a Pioreactor from your cluster, you can remove it from the list in available inventory in ",(0,o.jsx)(r.code,{children:"cluster.inventory"})," section in ",(0,o.jsx)(r.code,{children:"config.ini"}),"."]}),"\n",(0,o.jsx)(r.h3,{id:"possible-cluster-topologies",children:"Possible cluster topologies"}),"\n",(0,o.jsx)(r.p,{children:"A cluster can be made up of a single Pioreactor, or can be scaled to as many Pioreactors as you have. This gives us a few different possible topologies of what your cluster of Pioreactor(s) might look like."}),"\n",(0,o.jsx)(r.h4,{id:"single-pioreactor",children:"Single Pioreactor"}),"\n",(0,o.jsx)(r.p,{children:"The simplest topology is when you have a single Pioreactor, and so by default the Pioreactor is both the leader and the only worker."}),"\n",(0,o.jsx)("img",{src:"/img/user-guide/single_pioreactor_cluster.png",width:"335",style:{margin:"auto",display:"block"}}),"\n",(0,o.jsx)(r.h4,{id:"cluster-and-leader-is-a-worker",children:"Cluster, and leader is a worker"}),"\n",(0,o.jsx)(r.p,{children:"When you have multiple Pioreactors, you can nominate one to be the leader, and retain it as a worker, too:"}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"leader is also a worker in the cluster",src:t(28973).Z+"",width:"987",height:"363"})}),"\n",(0,o.jsxs)(r.h4,{id:"cluster-and-leader-is-not-a-worker",children:["Cluster, and leader is ",(0,o.jsx)(r.em,{children:"not"})," a worker"]}),"\n",(0,o.jsx)(r.p,{children:"You can also choose not to have the leader be a worker. This is useful if you have a spare Raspberry Pi without the Pioreactor hardware, or the number of Pioreactors grows large and you wish to keep one out of the inventory to focus on being a leader only."}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"leader not worker",src:t(71715).Z+"",width:"987",height:"351"})}),"\n",(0,o.jsx)(r.h3,{id:"how-to-edit-roles",children:"How to edit roles"}),"\n",(0,o.jsxs)(r.p,{children:["To tell the cluster which computer is the leader, you edit the ",(0,o.jsx)(r.code,{children:"config.ini"}),"'s ",(0,o.jsx)(r.code,{children:"leader_hostname"})," section (under ",(0,o.jsx)(r.code,{children:"cluster.topology"}),"):"]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:"https://user-images.githubusercontent.com/884032/103158348-b43eb700-478a-11eb-80d9-883458107f31.png",alt:"where to edit the leader"})}),"\n",(0,o.jsxs)(r.p,{children:["Inventory is assigned in ",(0,o.jsx)(r.code,{children:"config.ini"})," under ",(0,o.jsx)(r.code,{children:"cluster.inventory"}),":"]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:"https://user-images.githubusercontent.com/884032/103158311-5316e380-478a-11eb-9425-6bb0df079d58.png",alt:""})}),"\n",(0,o.jsx)(r.h3,{id:"adding-new-workers",children:"Adding new workers"}),"\n",(0,o.jsxs)(r.p,{children:["See the instructions ",(0,o.jsx)(r.a,{href:"/user-guide/software-set-up#adding-workers-to-your-cluster",children:"here"})," to add new workers to your cluster."]})]})}function u(e={}){const{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28973:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/leader_as_worker_cluster-0545170277e1f3b1377ad5e0408c417d.png"},71715:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/leader_cluster-f913ccaa86e3a4394ddcb87a5f17b18c.png"},11151:(e,r,t)=>{t.d(r,{Z:()=>a,a:()=>n});var o=t(67294);const i={},s=o.createContext(i);function n(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);