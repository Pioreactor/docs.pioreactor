"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[1981],{29167:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var o=t(85893),n=t(11151);const i={title:"Creating a Pioreactor cluster",slug:"/create-cluster"},a=void 0,s={id:"Extending your Pioreactor/cluster-management/create-cluster",title:"Creating a Pioreactor cluster",description:"Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a leader. The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware. A leader will communicate and control all the workers (non-leader Pioreactors) in the inventory.",source:"@site/user-guide/03-Extending your Pioreactor/01-cluster-management/01-create-cluster.md",sourceDirName:"03-Extending your Pioreactor/01-cluster-management",slug:"/create-cluster",permalink:"/user-guide/create-cluster",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Creating a Pioreactor cluster",slug:"/create-cluster"},sidebar:"tutorialSidebar",previous:{title:"Running a self-test",permalink:"/user-guide/running-self-test"},next:{title:"Powering your Pioreactor cluster",permalink:"/user-guide/powering-cluster"}},c={},l=[{value:"Adding Pioreactors to your cluster",id:"adding-pioreactors-to-your-cluster",level:3},{value:"Active and inactive",id:"active-and-inactive",level:3},{value:"Possible cluster topologies",id:"possible-cluster-topologies",level:3},{value:"Single Pioreactor",id:"single-pioreactor",level:4},{value:"Cluster, and leader is a worker",id:"cluster-and-leader-is-a-worker",level:4},{value:"Cluster, and leader is <em>not</em> a worker",id:"cluster-and-leader-is-not-a-worker",level:4},{value:"Common questions",id:"common-questions",level:3},{value:"Can I change the name of a <em>worker</em>?",id:"can-i-change-the-name-of-a-worker",level:4}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",...(0,n.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.p,{children:["Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a ",(0,o.jsx)(r.em,{children:"leader"}),". The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware. A leader will communicate and control all the ",(0,o.jsx)(r.em,{children:"workers"})," (non-leader Pioreactors) in the ",(0,o.jsx)(r.em,{children:"inventory"}),"."]}),"\n",(0,o.jsx)(r.admonition,{type:"info",children:(0,o.jsxs)(r.p,{children:["When you set up your first Pioreactor using our ",(0,o.jsx)(r.a,{href:"/user-guide/software-set-up",children:"software installation guide"}),", your Pioreactor was set up to be a leader already. You only need one leader in a Pioreactor cluster."]})}),"\n",(0,o.jsx)(r.h3,{id:"adding-pioreactors-to-your-cluster",children:"Adding Pioreactors to your cluster"}),"\n",(0,o.jsxs)(r.p,{children:["After installing the worker image onto your additional Pioreactor (see the instructions ",(0,o.jsx)(r.a,{href:"/user-guide/software-set-up#adding-additional-workers-to-your-cluster",children:"here"}),"), visit the Inventory page."]}),"\n",(0,o.jsxs)(r.p,{children:["On the ",(0,o.jsx)(r.em,{children:"Inventory"}),' page, you can search for and add worker Pioreactors to your cluster. Click "Add new Pioreactor" at the top right corner of this tab.']}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:t(51378).Z+"",width:"2973",height:"1469"})}),"\n",(0,o.jsx)(r.p,{children:'In the popup, add the name of your worker and click "Add Pioreactor".'}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:t(43184).Z+"",width:"2973",height:"1469"})}),"\n",(0,o.jsx)(r.p,{children:"Once a new Pioreactor is added, you may need to refresh the page to see the new worker in the cluster."}),"\n",(0,o.jsx)(r.p,{children:"This Inventory tab will display metadata pertaining to each of your Pioreactors. You can use this page to identify a Pioreactor (causes the blue LED on the HAT to blink), unassign a Pioreactor from any experiment, reboot a Pioreactor, or remove it from your cluster. This page also provides a summary of which Pioreactors are assigned to which experiment, as highlighted in yellow in the image below."}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{src:t(9102).Z+"",width:"2917",height:"1463"})}),"\n",(0,o.jsx)(r.h3,{id:"active-and-inactive",children:"Active and inactive"}),"\n",(0,o.jsxs)(r.p,{children:["Workers can be ",(0,o.jsx)(r.em,{children:"active"})," (available for running activities and cultures), or inactive. Inactive Pioreactors can still be assigned to experiments, but won't response to commands to run activities or participate in experiment profiles."]}),"\n",(0,o.jsx)(r.p,{children:"Turning a worker to inactive will halt all it's activities."}),"\n",(0,o.jsx)(r.h3,{id:"possible-cluster-topologies",children:"Possible cluster topologies"}),"\n",(0,o.jsx)(r.p,{children:"A cluster can be made up of a single Pioreactor, or can be scaled to as many Pioreactors as you have. This gives us a few different possible topologies of what your cluster of Pioreactor(s) might look like."}),"\n",(0,o.jsx)(r.h4,{id:"single-pioreactor",children:"Single Pioreactor"}),"\n",(0,o.jsx)(r.p,{children:"The simplest topology is when you have a single Pioreactor, and so by default the Pioreactor is both the leader and the only worker."}),"\n",(0,o.jsx)("img",{src:"/img/user-guide/single_pioreactor_cluster.png",width:"335",style:{margin:"auto",display:"block"}}),"\n",(0,o.jsx)(r.h4,{id:"cluster-and-leader-is-a-worker",children:"Cluster, and leader is a worker"}),"\n",(0,o.jsx)(r.p,{children:"When you have multiple Pioreactors, you can nominate one to be the leader, and retain it as a worker, too:"}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"leader is also a worker in the cluster",src:t(28973).Z+"",width:"987",height:"363"})}),"\n",(0,o.jsxs)(r.h4,{id:"cluster-and-leader-is-not-a-worker",children:["Cluster, and leader is ",(0,o.jsx)(r.em,{children:"not"})," a worker"]}),"\n",(0,o.jsx)(r.p,{children:"You can also choose not to have the leader be a worker. This is useful if you have a spare Raspberry Pi without the Pioreactor hardware, or the number of Pioreactors grows large and you wish to keep one out of the inventory to focus on being a leader only."}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"leader not worker",src:t(71715).Z+"",width:"987",height:"351"})}),"\n",(0,o.jsx)(r.h3,{id:"common-questions",children:"Common questions"}),"\n",(0,o.jsxs)(r.h4,{id:"can-i-change-the-name-of-a-worker",children:["Can I change the name of a ",(0,o.jsx)(r.em,{children:"worker"}),"?"]}),"\n",(0,o.jsx)(r.p,{children:"Yes, so long as that worker isn't the leader. Note: this doesn't change historical data."}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Remove the worker from your cluster using the Inventory page."}),"\n",(0,o.jsx)(r.li,{children:"SSH into the worker (it should still be on your network, even if not part of the cluster)."}),"\n",(0,o.jsxs)(r.li,{children:["Run ",(0,o.jsx)(r.code,{children:"sudo hostnamectl set-hostname <new-worker-name> && sudo reboot"})]}),"\n",(0,o.jsx)(r.li,{children:"After a moment, the worker will turn back on with the new name. You can then use the Inventory page to add the worker again."}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,n.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},43184:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/add-new-pioreactor-1bbe84865bdde6f9d24e923c2437520c.png"},9102:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/inventory-multiple-pios-9af5e63a906f09ebb75d1d4f4c79baee.png"},51378:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/inventory-tab-702a21756ef0a5d34c0c012dcaf095bc.png"},28973:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/leader_as_worker_cluster-0545170277e1f3b1377ad5e0408c417d.png"},71715:(e,r,t)=>{t.d(r,{Z:()=>o});const o=t.p+"assets/images/leader_cluster-f913ccaa86e3a4394ddcb87a5f17b18c.png"},11151:(e,r,t)=>{t.d(r,{Z:()=>s,a:()=>a});var o=t(67294);const n={},i=o.createContext(n);function a(e){const r=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(i.Provider,{value:r},e.children)}}}]);