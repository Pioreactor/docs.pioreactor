"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[6809],{80193:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>n,metadata:()=>a,toc:()=>l});var r=o(85893),i=o(11151);const n={id:"backup-system-files",title:"Back up and restore Pioreactor system files",slug:"/backup-system-files",description:"Export and import a Pioreactor\u2019s ~/.pioreactor directory from the Inventory page.",hide_table_of_contents:!0},s=void 0,a={id:"Extending your Pioreactor/cluster-management/backup-system-files",title:"Back up and restore Pioreactor system files",description:"Export and import a Pioreactor\u2019s ~/.pioreactor directory from the Inventory page.",source:"@site/user-guide/03-Extending your Pioreactor/01-cluster-management/03-backup-and-restore-system-files.md",sourceDirName:"03-Extending your Pioreactor/01-cluster-management",slug:"/backup-system-files",permalink:"/user-guide/backup-system-files",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"backup-system-files",title:"Back up and restore Pioreactor system files",slug:"/backup-system-files",description:"Export and import a Pioreactor\u2019s ~/.pioreactor directory from the Inventory page.",hide_table_of_contents:!0},sidebar:"tutorialSidebar",previous:{title:"Powering your Pioreactor cluster",permalink:"/user-guide/powering-cluster"},next:{title:"Change Pioreactor model",permalink:"/user-guide/Extending your Pioreactor/cluster-management/change-model"}},c={},l=[{value:"Exporting system files",id:"exporting-system-files",level:2},{value:"Troubleshooting",id:"troubleshooting",level:4},{value:"Importing system files",id:"importing-system-files",level:2},{value:"Advanced notes",id:"advanced-notes",level:2}];function d(e){const t={code:"code",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Each Pioreactor keeps its configuration, calibration data, and persistent state inside ",(0,r.jsx)(t.code,{children:"~/.pioreactor"}),". The Inventory page now lets you export that directory as a zip for safekeeping and import it onto the same unit when you need to restore or clone a setup."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Manage Pioreactor menu showing export and import actions highlighted",src:o(27449).Z+"",width:"3152",height:"1648"})}),"\n",(0,r.jsx)(t.h2,{id:"exporting-system-files",children:"Exporting system files"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Open the ",(0,r.jsx)(t.strong,{children:"Inventory"})," page, find the Pioreactor you want to back up, and click ",(0,r.jsx)(t.strong,{children:"Manage Pioreactor \u2192 Export system files"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Confirm the export when prompted. The UI downloads a file named ",(0,r.jsx)(t.code,{children:"<pioreactor>_dot_pioreactor.zip"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Store the archive somewhere safe. It contains every file from that unit\u2019s ",(0,r.jsx)(t.code,{children:"~/.pioreactor"})," plus a ",(0,r.jsx)(t.code,{children:"pioreactor_export_metadata.json"})," descriptor (hostname, version, export time)."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Export system files confirmation dialog with the export button highlighted",src:o(75462).Z+"",width:"3152",height:"1648"})}),"\n",(0,r.jsxs)(t.p,{children:["After you confirm, the browser saves a zip named ",(0,r.jsx)(t.code,{children:"<pioreactor>_dot_pioreactor.zip"}),"."]}),"\n",(0,r.jsx)(t.h4,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If export is blocked, check whether the unit has the sentinel file ",(0,r.jsx)(t.code,{children:"~/.pioreactor/DISALLOW_UI_FILE_SYSTEM"}),"; removing it re-enables downloads."]}),"\n",(0,r.jsx)(t.li,{children:'Since the export is over http, you may need to "approve" your browser to download it (check the download tab in your browser).'}),"\n",(0,r.jsx)(t.li,{children:"For the leader Pioreactor, it's also exporting the sqlite database. This might take a while for very large databases."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"importing-system-files",children:"Importing system files"}),"\n",(0,r.jsx)(t.p,{children:"Use imports when you need to restore a backup, duplicate a Pioreactor after replacing hardware, or bring back calibration data after re-flashing an SD card."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["On the ",(0,r.jsx)(t.strong,{children:"Inventory"})," page, choose ",(0,r.jsx)(t.strong,{children:"Manage Pioreactor \u2192 Import system files"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Read the warning and confirm. You will be prompted to select a ",(0,r.jsx)(t.code,{children:".zip"})," generated by the export flow."]}),"\n",(0,r.jsx)(t.li,{children:"Wait for confirmation in the snackbar. The UI shows a spinner while uploading and tells you when the Pioreactor begins rebooting."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Import system files confirmation dialog with the import button highlighted",src:o(30985).Z+"",width:"3152",height:"1648"})}),"\n",(0,r.jsx)(t.p,{children:"Important behaviour to note:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Hostnames must match. The worker compares the archive metadata to the target unit name and rejects mismatches during import."}),"\n",(0,r.jsx)(t.li,{children:"The ZIP is validated to block absolute paths, symlinks, or other unsafe entries before anything is extracted."}),"\n",(0,r.jsxs)(t.li,{children:["An automatic backup of the existing ",(0,r.jsx)(t.code,{children:"~/.pioreactor"})," is written to ",(0,r.jsx)(t.code,{children:"/tmp/<hostname>_dot_pioreactor_backup_<timestamp>"})," before any files are replaced. You can manually restore from that folder if you need to undo the import."]}),"\n",(0,r.jsx)(t.li,{children:"After the files are moved into place, the worker schedules a reboot so the new configuration takes effect."}),"\n",(0,r.jsxs)(t.li,{children:["Imports and exports share the same guard: adding ",(0,r.jsx)(t.code,{children:"~/.pioreactor/DISALLOW_UI_FILE_SYSTEM"})," disables both operations until the file is removed."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"advanced-notes",children:"Advanced notes"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For scripted workflows you can hit ",(0,r.jsx)(t.code,{children:"/api/units/$broadcast/zipped_dot_pioreactor"})," to download archives for every worker in one request. The aggregated ZIP namespaces each unit under a folder that matches its hostname."]}),"\n",(0,r.jsxs)(t.li,{children:["Imports are always per-unit. If you are automating restores, loop over your hosts and POST the zip to ",(0,r.jsx)(t.code,{children:"/api/units/<pioreactor>/import_zipped_dot_pioreactor"})," one at a time."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"With these tools you can keep regular snapshots of your cluster, move calibrations between identical builds, or roll back quickly after testing changes."})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},75462:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/inventory-export-dialog-9d9f0f913c2c9d5a3505acb92168e63d.png"},27449:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/inventory-export-import-menu-34087c9f4e81ca41148ca2fc372f8022.png"},30985:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/inventory-import-dialog-f632804526d54dcbf450fa55b152fac9.png"},11151:(e,t,o)=>{o.d(t,{Z:()=>a,a:()=>s});var r=o(67294);const i={},n=r.createContext(i);function s(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);