"use strict";(globalThis.webpackChunkpioreactor=globalThis.webpackChunkpioreactor||[]).push([[1708],{2042(e,r,t){t.d(r,{A:()=>o});const o=t.p+"assets/images/leader_as_worker_cluster-0545170277e1f3b1377ad5e0408c417d.png"},18274(e,r,t){t.d(r,{A:()=>o});const o=t.p+"assets/images/leader_cluster-f913ccaa86e3a4394ddcb87a5f17b18c.png"},28453(e,r,t){t.d(r,{R:()=>i,x:()=>s});var o=t(96540);const a={},n=o.createContext(a);function i(e){const r=o.useContext(n);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(n.Provider,{value:r},e.children)}},44330(e,r,t){t.d(r,{A:()=>o});const o=t.p+"assets/images/inventory-add-modal-665c3f26b64cf7c90175afc68889b3e9.png"},58594(e,r,t){t.d(r,{A:()=>o});const o=t.p+"assets/images/inventory-actions-7b9eef0efdeac00d51eaba00b4975277.png"},63747(e,r,t){t.d(r,{A:()=>o});const o=t.p+"assets/images/inventory-add-pioreactor-f855fc53bed4252188baabc52f09b5b2.png"},92283(e,r,t){t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"Extending your Pioreactor/cluster-management/create-cluster","title":"Creating a Pioreactor cluster","description":"Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a leader. The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware. A leader will communicate and control all the workers (non-leader Pioreactors) in the inventory.","source":"@site/user-guide/03-Extending your Pioreactor/01-cluster-management/01-create-cluster.md","sourceDirName":"03-Extending your Pioreactor/01-cluster-management","slug":"/create-cluster","permalink":"/user-guide/create-cluster","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Creating a Pioreactor cluster","slug":"/create-cluster","hide_table_of_contents":true},"sidebar":"tutorialSidebar","previous":{"title":"Dosing and LED updates","permalink":"/user-guide/manual-dosing-leds"},"next":{"title":"Powering your Pioreactor cluster","permalink":"/user-guide/powering-cluster"}}');var a=t(74848),n=t(28453);const i={title:"Creating a Pioreactor cluster",slug:"/create-cluster",hide_table_of_contents:!0},s=void 0,l={},c=[{value:"Adding Pioreactors to your cluster",id:"adding-pioreactors-to-your-cluster",level:3},{value:"From the command line with an ipv4 address",id:"from-the-command-line-with-an-ipv4-address",level:4},{value:"Active and inactive",id:"active-and-inactive",level:3},{value:"Possible cluster topologies",id:"possible-cluster-topologies",level:3},{value:"Single Pioreactor",id:"single-pioreactor",level:4},{value:"Cluster, and leader is a worker",id:"cluster-and-leader-is-a-worker",level:4},{value:"Cluster, and leader is <em>not</em> a worker",id:"cluster-and-leader-is-not-a-worker",level:4},{value:"Common questions",id:"common-questions",level:3},{value:"Can I change the name of a <em>worker</em>?",id:"can-i-change-the-name-of-a-worker",level:4},{value:"Can I change the name of a <em>leader</em>?",id:"can-i-change-the-name-of-a-leader",level:4}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.p,{children:["Pioreactors are able to be used as individual units, or in concert with other Pioreactors. In either case, a Pioreactor needs to be assigned as a ",(0,a.jsx)(r.em,{children:"leader"}),". The leader unit controls other Pioreactors (and that may include itself), stores the database, hosts the web interface, and is the interface between users and the hardware. A leader will communicate and control all the ",(0,a.jsx)(r.em,{children:"workers"})," (non-leader Pioreactors) in the ",(0,a.jsx)(r.em,{children:"inventory"}),"."]}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["When you set up your first Pioreactor using our ",(0,a.jsx)(r.a,{href:"/user-guide/software-set-up",children:"software installation guide"}),", your Pioreactor was set up to be a leader already. You only need one leader in a Pioreactor cluster."]})}),"\n",(0,a.jsx)(r.h3,{id:"adding-pioreactors-to-your-cluster",children:"Adding Pioreactors to your cluster"}),"\n",(0,a.jsxs)(r.p,{children:["After installing the ",(0,a.jsx)(r.em,{children:"worker"})," image onto your additional Pioreactor (see the instructions ",(0,a.jsx)(r.a,{href:"/user-guide/software-set-up#adding-additional-workers-to-your-cluster",children:"here"}),"), visit the Inventory page."]}),"\n",(0,a.jsxs)(r.p,{children:["On the ",(0,a.jsx)(r.em,{children:"Inventory"}),' page, you can search for and add worker Pioreactors to your cluster. Click "Add new Pioreactor" at the top right corner of this tab.']}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"Inventory tab with the Add new Pioreactor button highlighted",src:t(63747).A+"",width:"3152",height:"1648"})}),"\n",(0,a.jsx)(r.p,{children:'In the popup, add the name of your worker and click "Add Pioreactor".'}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"Add Pioreactor modal with hostname and Add Pioreactor button highlighted",src:t(44330).A+"",width:"3152",height:"1648"})}),"\n",(0,a.jsx)(r.p,{children:"Once a new Pioreactor is added, you may need to refresh the page to see the new worker in the cluster."}),"\n",(0,a.jsx)(r.p,{children:"This Inventory tab will display metadata pertaining to each of your Pioreactors. You can use this page to identify a Pioreactor (causes the blue LED on the HAT to blink), unassign a Pioreactor from any experiment, reboot a Pioreactor, or remove it from your cluster. This page also provides a summary of which Pioreactors are assigned to which experiment, as shown in the image below."}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"Inventory card with action buttons highlighted",src:t(58594).A+"",width:"3152",height:"1648"})}),"\n",(0,a.jsx)(r.h4,{id:"from-the-command-line-with-an-ipv4-address",children:"From the command line with an ipv4 address"}),"\n",(0,a.jsx)(r.p,{children:"Sometimes, you need to pass in an ipv4 instead of discovering a worker via it's hostname. To do this, SSH into your leader and run:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:"pio workers add <hostname> -a <ipv4>\n"})}),"\n",(0,a.jsx)(r.h3,{id:"active-and-inactive",children:"Active and inactive"}),"\n",(0,a.jsxs)(r.p,{children:["Workers can be ",(0,a.jsx)(r.em,{children:"active"})," (available for running activities), or inactive. Inactive Pioreactors can still be assigned to experiments, but won't respond to commands to run activities or participate in experiment profiles. Inactive is a useful tool for taking a Pioreactor temporarily out of an experiment or cluster."]}),"\n",(0,a.jsx)(r.p,{children:"Turning a worker to inactive will halt all its activities."}),"\n",(0,a.jsx)(r.h3,{id:"possible-cluster-topologies",children:"Possible cluster topologies"}),"\n",(0,a.jsx)(r.p,{children:"A cluster can be made up of a single Pioreactor, or can be scaled to as many Pioreactors as you have. This gives us a few different possible topologies of what your cluster of Pioreactor(s) might look like."}),"\n",(0,a.jsx)(r.h4,{id:"single-pioreactor",children:"Single Pioreactor"}),"\n",(0,a.jsx)(r.p,{children:"The simplest topology is when you have a single Pioreactor, and by default it is both the leader and the only worker."}),"\n",(0,a.jsx)("img",{src:"/img/user-guide/03-extending-your-pioreactor/01-cluster-management/01-create-cluster/single_pioreactor_cluster.png",width:"335",style:{margin:"auto",display:"block"}}),"\n",(0,a.jsx)(r.h4,{id:"cluster-and-leader-is-a-worker",children:"Cluster, and leader is a worker"}),"\n",(0,a.jsx)(r.p,{children:"When you have multiple Pioreactors, you can nominate one to be the leader, and retain it as a worker, too:"}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"leader is also a worker in the cluster",src:t(2042).A+"",width:"987",height:"363"})}),"\n",(0,a.jsxs)(r.h4,{id:"cluster-and-leader-is-not-a-worker",children:["Cluster, and leader is ",(0,a.jsx)(r.em,{children:"not"})," a worker"]}),"\n",(0,a.jsxs)(r.p,{children:["You can also choose not to have the leader be a worker. This is useful if you have a spare Raspberry Pi without the Pioreactor hardware, or the number of Pioreactors grows large and you wish to keep one out of the inventory to focus on being a leader only. We provide custom images for this ",(0,a.jsx)(r.a,{href:"/user-guide/software-set-up#id-like-to-have-the-leader-not-be-a-worker-and-only-a-standalone-leader-can-i-do-that",children:"here"}),"."]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"leader not worker",src:t(18274).A+"",width:"987",height:"351"})}),"\n",(0,a.jsx)(r.h3,{id:"common-questions",children:"Common questions"}),"\n",(0,a.jsxs)(r.h4,{id:"can-i-change-the-name-of-a-worker",children:["Can I change the name of a ",(0,a.jsx)(r.em,{children:"worker"}),"?"]}),"\n",(0,a.jsx)(r.p,{children:"Yes, so long as that worker isn't the leader. Note: this doesn't change historical data."}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Remove the worker from your cluster on the Inventory page."}),"\n",(0,a.jsx)(r.li,{children:"SSH into the worker (it should still be on your network, even if not part of the cluster)."}),"\n",(0,a.jsxs)(r.li,{children:["Run ",(0,a.jsx)(r.code,{children:"sudo hostnamectl set-hostname <new-worker-name> && sudo reboot"})]}),"\n",(0,a.jsx)(r.li,{children:"After a moment, the worker will turn back on with the new name. You can then use the Inventory page to add the worker again."}),"\n"]}),"\n",(0,a.jsxs)(r.h4,{id:"can-i-change-the-name-of-a-leader",children:["Can I change the name of a ",(0,a.jsx)(r.em,{children:"leader"}),"?"]}),"\n",(0,a.jsx)(r.p,{children:"This is more difficult, and our suggestion is to restart the cluster."})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);