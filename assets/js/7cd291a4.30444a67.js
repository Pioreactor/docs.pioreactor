"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[1823],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(r),u=a,h=d["".concat(p,".").concat(u)]||d[u]||m[u]||n;return r?o.createElement(h,i(i({ref:t},c),{},{components:r})):o.createElement(h,i({ref:t},c))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,i=new Array(n);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<n;s++)i[s]=r[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}u.displayName="MDXCreateElement"},70370:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var o=r(87462),a=(r(67294),r(3905));const n={title:"Export and import your existing data into a new image",slug:"/export-import-existing-data"},i=void 0,l={unversionedId:"Advanced/export-import-existing-data",id:"Advanced/export-import-existing-data",title:"Export and import your existing data into a new image",description:"Note: you don't need to do this. This is only if you want to move existing data to the new Pioreactor.",source:"@site/user-guide/30-Advanced/16-export-import-existing-data.md",sourceDirName:"30-Advanced",slug:"/export-import-existing-data",permalink:"/user-guide/export-import-existing-data",draft:!1,tags:[],version:"current",sidebarPosition:16,frontMatter:{title:"Export and import your existing data into a new image",slug:"/export-import-existing-data"},sidebar:"tutorialSidebar",previous:{title:"Writing Pioreactor scripts with Python",permalink:"/user-guide/intro-python-scripting"},next:{title:"Blue LED flashing & error codes",permalink:"/user-guide/error-codes"}},p={},s=[],c={toc:s},d="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(d,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Note: you don't ",(0,a.kt)("em",{parentName:"p"},"need")," to do this. This is only if you want to move existing data to the new Pioreactor."),(0,a.kt)("p",null,"Here's how I suggest your workflow be. We're here to help: we can offer email or live support, just email us at ",(0,a.kt)("a",{parentName:"p",href:"mailto:hello@pioreactor.com"},"hello@pioreactor.com"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Starting with your leader Pioreactor, make note of the name of it. The next steps will turn off all data collection, so do this outside of any running experiments."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://docs.pioreactor.com/user-guide/accessing-raspberry-pi"},"SSH")," into the leader, and create a new file with:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"nano ~/export_data.sh\n")),"Paste the ",(0,a.kt)("a",{parentName:"li",href:"https://raw.githubusercontent.com/Pioreactor/pioreactor/develop/migration_scripts/export_data.sh"},"code linked here")," into the editor. ",(0,a.kt)("inlineCode",{parentName:"li"},"crtl-x")," to exit the editor."),(0,a.kt)("li",{parentName:"ol"},"Run this export script with ",(0,a.kt)("inlineCode",{parentName:"li"},"bash export_data.sh"),". This creates an export file with all your experiment data, config files, Python plugins, profiles, etc. Exporting will take time proportional to how large your database is."),(0,a.kt)("li",{parentName:"ol"},"Once the export is done, make note of the filename of the export. Locally, on the command line (or with FileZilla), download the file. You can do:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"# this is run on your local computer, i.e. the one you SSH from.\nscp pioreactor@<leader name>.local:/home/pioreactor/<filename of export> .\n"))),(0,a.kt)("li",{parentName:"ol"},"Optional: do this for each Pioreactor worker in your cluster. Exporting workers will save data like calibrations, but we suggest you re-calibrate after anyways. Almost all important data, like historical experiments and logs, are stored on the leader, so you may be okay with just transferring leader data and wiping workers. It's up to you. Happy to chat further at ",(0,a.kt)("a",{parentName:"li",href:"mailto:hello@pioreactor.com"},"hello@pioreactor.com"),"."),(0,a.kt)("li",{parentName:"ol"},"With the export file(s) local, you can now proceed with re-imaging your Pioreactors, by following the same ",(0,a.kt)("a",{parentName:"li",href:"https://docs.pioreactor.com/user-guide/software-set-up"},"steps here"),". The images you download will be the latest image containing the new operating system and software. ",(0,a.kt)("strong",{parentName:"li"},"Important"),": choose the same Pioreactor hostnames!"),(0,a.kt)("li",{parentName:"ol"},"Once your Pioreactor leader is running (check that you can access the UI at ",(0,a.kt)("a",{parentName:"li",href:"http://pioreactor.local"},"http://pioreactor.local"),"), we'll upload the export with:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"# this is run on your local computer\nscp <filename of export> pioreactor@<leader name>.local:/home/pioreactor/\n"))),(0,a.kt)("li",{parentName:"ol"},"You may recieve an error: host key verification failed. Open the known_hosts file in your .ssh folder and delete the line containing your ",(0,a.kt)("inlineCode",{parentName:"li"},"<leader name>"),".\nWhen prompted, ",(0,a.kt)("inlineCode",{parentName:"li"},"Are you sure you want to continue connecting?")," enter ",(0,a.kt)("inlineCode",{parentName:"li"},"yes"),".\nEnter password ",(0,a.kt)("inlineCode",{parentName:"li"},"raspberry")," and continue.  "),(0,a.kt)("li",{parentName:"ol"},"SSH into the leader, and create a new file with:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"nano ~/import_data.sh\n")),"Paste the ",(0,a.kt)("a",{parentName:"li",href:"https://raw.githubusercontent.com/Pioreactor/pioreactor/develop/migration_scripts/import_data.sh"},"code linked here")," into the editor. ",(0,a.kt)("inlineCode",{parentName:"li"},"crtl-x")," to exit the editor."),(0,a.kt)("li",{parentName:"ol"},"Run this export script with ",(0,a.kt)("inlineCode",{parentName:"li"},"bash import_data.sh <filename of export>"),". The Pioreactor will update itself, and then perform a restart."),(0,a.kt)("li",{parentName:"ol"},"Once the Pioreactor is back online, you should see your old experiments in the UI."),(0,a.kt)("li",{parentName:"ol"},"Optional: If you exported your worker data, you can do the same thing."),(0,a.kt)("li",{parentName:"ol"},"You're done!")))}m.isMDXComponent=!0}}]);