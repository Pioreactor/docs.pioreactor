"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[813],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return h}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),s=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(r),h=o,f=d["".concat(c,".").concat(h)]||d[h]||p[h]||i;return r?n.createElement(f,a(a({ref:t},u),{},{components:r})):n.createElement(f,a({ref:t},u))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var s=2;s<i;s++)a[s]=r[s];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5261:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var n=r(7462),o=r(3366),i=(r(7294),r(3905)),a=["components"],l={},c="Start here",s={unversionedId:"developer_guide_intro",id:"developer_guide_intro",isDocsHomePage:!1,title:"Start here",description:"Topology",source:"@site/developer_guide/01-developer_guide_intro.md",sourceDirName:".",slug:"/developer_guide_intro",permalink:"/developer_guide/developer_guide_intro",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",next:{title:'How background jobs work ("activities")',permalink:"/developer_guide/Background Jobs/How background jobs work"}},u=[{value:"Topology",id:"topology",children:[],level:3},{value:"Networking",id:"networking",children:[],level:3},{value:"Background Jobs",id:"background-jobs",children:[],level:3}],p={toc:u};function d(e){var t=e.components,r=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"start-here"},"Start here"),(0,i.kt)("h3",{id:"topology"},"Topology"),(0,i.kt)("p",null,'One of the Raspberry Pi\'s is assigned as the "leader", and this hosts most of the services: web server, MQTT broker, database, etc. It also sends commands to any "workers". Together, the leader and all the workers are called a "cluster". See more information about clusters ',(0,i.kt)("a",{parentName:"p",href:"/user_guide/Creating%20a%20Pioreactor%20cluster"},"here"),"."),(0,i.kt)("h3",{id:"networking"},"Networking"),(0,i.kt)("p",null,"The Raspberry Pis communicate through the local network (in more advanced cases, this network is hosted on one of the leader). Each RPi broadcasts its hostname through mDNS, and the leader also broadcasts an alias (default: ","`","pioreactor.local","`","). The use of mDNS is fine if devices support it: currently Apple, Linux and Windows 10 products do."),(0,i.kt)("p",null,"The PioreactorUI is hosted on the leader and exposes port 80, hence users on the local network can view the website at ","`","pioreactor.local","`","."),(0,i.kt)("h3",{id:"background-jobs"},"Background Jobs"),(0,i.kt)("p",null,"A background job (labelled activities in the web interface) is a Python process that controls some element of the Pioreactor. For example, the ",(0,i.kt)("inlineCode",{parentName:"p"},"stirring.py")," background job controls whether the stirring should be turned on, how fast it should spin, and reports its state to the cluster leader. Communication between the job and the leader / user is through MQTT. Specifically, the job subscribes to the topic ",(0,i.kt)("inlineCode",{parentName:"p"},"pioreactor/<unit>/<experiment>/<job name>/<attribute>/set"),". For example, to change the stirring duty cycle to 50 on ",(0,i.kt)("inlineCode",{parentName:"p"},"unit1"),", we send a message to ",(0,i.kt)("inlineCode",{parentName:"p"},"pioreactor/unit1/my experiment/stirring/set/duty_cycle")," with payload ",(0,i.kt)("inlineCode",{parentName:"p"},"50"),". The job knows how to update it self. Similarly, to retrieve the current value of a job attribute (like ",(0,i.kt)("inlineCode",{parentName:"p"},"$state"),"), one can listen to the topic: ",(0,i.kt)("inlineCode",{parentName:"p"},"pioreactor/<unit>/<experiment>/<job name>/<attribute>"),"."))}d.isMDXComponent=!0}}]);