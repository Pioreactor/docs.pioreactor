"use strict";(globalThis.webpackChunkpioreactor=globalThis.webpackChunkpioreactor||[]).push([[2725],{71296(e,t,i){i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Plugins/adding-plugins-to-ui","title":"Adding your plugins to the web interface","description":"With custom background jobs or automations, the goal is to have it available in the web interface, so you and your users don\'t need to use the command line at all. We\'ve built support for easily adding to the web interface.","source":"@site/developer-guide/07-Plugins/02-adding-plugins-to-ui.md","sourceDirName":"07-Plugins","slug":"/adding-plugins-to-ui","permalink":"/developer-guide/adding-plugins-to-ui","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Adding your plugins to the web interface","slug":"/adding-plugins-to-ui","hide_table_of_contents":true},"sidebar":"tutorialSidebar","previous":{"title":"Working with plugins","permalink":"/developer-guide/intro-plugins"},"next":{"title":"Turning your plugins into a Python package to share","permalink":"/developer-guide/plugin-as-python-package"}}');var o=i(74848),s=i(28453);const a={title:"Adding your plugins to the web interface",slug:"/adding-plugins-to-ui",hide_table_of_contents:!0},r=void 0,d={},l=[{value:"Background jobs and scripts",id:"background-jobs-and-scripts",level:2},{value:"Adding a custom background job to the list of activities",id:"adding-a-custom-background-job-to-the-list-of-activities",level:3},{value:"Adding a custom Python script to the list of activities",id:"adding-a-custom-python-script-to-the-list-of-activities",level:3},{value:"Automations",id:"automations",level:2},{value:"Adding a custom automation to the drop-down of automations",id:"adding-a-custom-automation-to-the-drop-down-of-automations",level:3},{value:"Charts",id:"charts",level:2},{value:"Adding a chart to display a new data source",id:"adding-a-chart-to-display-a-new-data-source",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"With custom background jobs or automations, the goal is to have it available in the web interface, so you and your users don't need to use the command line at all. We've built support for easily adding to the web interface."}),"\n",(0,o.jsx)(t.p,{children:"Based on whether your have created a background job, a script, or an automation, adding it to the UI only involves creating a yaml file and placing it in the correct directory."}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsxs)(t.p,{children:["You should have already added your plugin's Python code to your Pioreactor by some method presented ",(0,o.jsx)(t.a,{href:"/developer-guide/intro-plugins",children:"here"}),"."]})}),"\n",(0,o.jsx)(t.h2,{id:"background-jobs-and-scripts",children:"Background jobs and scripts"}),"\n",(0,o.jsx)(t.h3,{id:"adding-a-custom-background-job-to-the-list-of-activities",children:"Adding a custom background job to the list of activities"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(5576).A+"",width:"1850",height:"1084"})}),"\n",(0,o.jsx)(t.p,{children:"The list of activities, among other things, is sourced from either of two directories:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/var/www/pioreactorui/contrib/jobs/"}),', is the source of the "default" jobs']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/home/pioreactor/.pioreactor/plugins/ui/contrib/jobs"}),", is a directory to put custom yaml files for jobs."]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Placing a new yaml file in either of these folders will populate the page with your new job. Here's an example ",(0,o.jsx)(t.code,{children:"example.yaml"})," file:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:"---\ndisplay_name: Name\njob_name: job_name_as_defined_in_Python\ndisplay: true  # true to display on the /Pioreactors card\nsource: your_plugin_name\ndescription: This description is displayed with the start/stop buttons in Control / Activities.\npublished_settings:\n  - key: rpm   # as defined in Python\n    unit: RPM  #\n    label: Stirring speed # human readable name\n    description: This description is displayed with an editable field in Control / Settings.\n    type: numeric  # one of numeric, bool, string, json\n    default: null\n    display: true # true to display on the /Pioreactors card\n  - key: something_else\n    unit: lb\n    label: Something else\n    description: This description is displayed with an editable switch in Control / Settings.\n    type: bool # one of numeric, bool, string, json\n    default: null\n    display: true # true to display on the /Pioreactors card\n"})}),"\n",(0,o.jsx)(t.p,{children:"Saving it to either directory above, and refreshing the page:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(3970).A+"",width:"1844",height:"1088"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(78094).A+"",width:"1838",height:"1080"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(245).A+"",width:"2010",height:"440"})}),"\n",(0,o.jsx)(t.h3,{id:"adding-a-custom-python-script-to-the-list-of-activities",children:"Adding a custom Python script to the list of activities"}),"\n",(0,o.jsx)(t.p,{children:"Placing a new yaml file in either of the following folders will populate the UI with your new job."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/var/www/pioreactorui/contrib/jobs/"}),', is the source of the "default" jobs']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/home/pioreactor/.pioreactor/plugins/ui/contrib/jobs/"}),", is a directory to put custom plugins."]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:"---\ndisplay_name: Example Script\ndisplay: true\njob_name: my_script\nsource: Example Script\ndescription: Run my custom script.\npublished_settings: []\n"})}),"\n",(0,o.jsxs)(t.p,{children:["See more information on the structure of your script ",(0,o.jsx)(t.a,{href:"/developer-guide/intro-plugins#custom-scripts",children:"here"})]}),"\n",(0,o.jsx)(t.h2,{id:"automations",children:"Automations"}),"\n",(0,o.jsx)(t.h3,{id:"adding-a-custom-automation-to-the-drop-down-of-automations",children:"Adding a custom automation to the drop-down of automations"}),"\n",(0,o.jsxs)(t.p,{children:["Suppose we wish to add our new automation, either installed from a package or via the ",(0,o.jsx)(t.code,{children:"plugins"})," folder, to the drop-down list of automations users can choose from:"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(41793).A+"",width:"1286",height:"1122"})}),"\n",(0,o.jsx)(t.p,{children:"This list is sourced from yaml files located on the leader's Raspberry Pi, in either of two directories:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/var/www/pioreactorui/contrib/automations/"}),", is the source of the our built-in automations"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"/home/pioreactor/.pioreactor/plugins/ui/contrib/automations/{led,dosing,temperature}"}),", is a directory to put yaml files for custom automations."]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Placing your yaml file in either folder above will populate the dropdown list in the UI with your new automation. Here's an example ",(0,o.jsx)(t.code,{children:"example.yaml"})," file:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:'---\ndisplay_name: My Automations Name  # human readable name\nautomation_name: my_automations_name   # the corresponding name of the automation from the Python code.\nsource: my_plugin_name\ndescription: Provide a meaningful description of what the automation does, when to use it, how it works...\nfields:\n  - key: duration  # key is the same as the keyword in the Python code.\n    default: 30\n    unit: min\n    label: Duration between events\n  - key: target_od\n    default: 1.5\n    unit: AU\n    label: Target OD\n  - key: volume\n    default: 0.75\n    unit: mL\n    label: Max volume\n  - key: intensity\n    default: 50\n    unit: "%"  # note: percent signs needs to be quoted.\n    label: Intensity of PWM\n'})}),"\n",(0,o.jsxs)(t.p,{children:["If this file was saved to the folder ",(0,o.jsx)(t.code,{children:"/home/pioreactor/.pioreactor/plugins/ui/contrib/automations/dosing"}),", we would see the following in the web interface (after refreshing):"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(91341).A+"",width:"1314",height:"1096"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:i(50660).A+"",width:"1280",height:"1098"})}),"\n",(0,o.jsxs)(t.p,{children:["More examples of automation ",(0,o.jsx)(t.a,{href:"https://github.com/Pioreactor/pioreactorui/tree/master/contrib/automations",children:"yaml files here"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"charts",children:"Charts"}),"\n",(0,o.jsx)(t.h3,{id:"adding-a-chart-to-display-a-new-data-source",children:"Adding a chart to display a new data source"}),"\n",(0,o.jsxs)(t.p,{children:["If your plugin produces data (or is some novel transformation of existing data), you can also add a new chart to the Overview page. See documentation ",(0,o.jsx)(t.a,{href:"/developer-guide/chart-to-ui",children:"here"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"If the UI isn't display the data from your yaml, you may have introduced a yaml file that is not being read correctly. Look for error logs on the Overview page."}),"\n",(0,o.jsx)(t.li,{children:"There is a 30sec cache, so it may take up to 30sec to see new changes in the UI."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},5576(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/activities-5d341f64a5d9ebcc0b558948fc9b98de.png"},3970(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/activities_with_example-d119be228fdbbd58acce37ab1fbaf129.png"},50660(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/automations_example-ce1734e24dd5d12c39533e911ab76c46.png"},245(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/card_with_example-94398f0ba8b44158bf500784ed96bfc4.png"},41793(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/dropdown_automations-c18aa39556f74acbf8b92088b6e36348.png"},91341(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/dropdown_automations_with_example-6faf53d348f7dc3b5d7be98a79263c98.png"},78094(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/settings_with_example-e8cb50818e918606931a292e2b3eef97.png"},28453(e,t,i){i.d(t,{R:()=>a,x:()=>r});var n=i(96540);const o={},s=n.createContext(o);function a(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);