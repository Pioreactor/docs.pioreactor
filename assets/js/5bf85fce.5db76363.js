"use strict";(self.webpackChunkpioreactor=self.webpackChunkpioreactor||[]).push([[135],{42900:(e,o,i)=>{i.r(o),i.d(o,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var r=i(85893),n=i(11151);const t={title:"Custom bioreactor models",slug:"/custom-bioreactor-models",hide_table_of_contents:!0},s=void 0,l={id:"Hardware/custom_models",title:"Custom bioreactor models",description:"This feature is actively under development - let us know what else you would like to see!",source:"@site/developer-guide/10-Hardware/11-custom_models.md",sourceDirName:"10-Hardware",slug:"/custom-bioreactor-models",permalink:"/developer-guide/custom-bioreactor-models",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Custom bioreactor models",slug:"/custom-bioreactor-models",hide_table_of_contents:!0},sidebar:"tutorialSidebar",previous:{title:"Customize the hardware interface",permalink:"/developer-guide/custom-hardware"},next:{title:"Overview",permalink:"/developer-guide/web-ui-introduction"}},d={},a=[{value:"Directory layout",id:"directory-layout",level:2},{value:"Required fields",id:"required-fields",level:2},{value:"Example definition",id:"example-definition",level:2},{value:"Coordinating with hardware profiles",id:"coordinating-with-hardware-profiles",level:2},{value:"Validation and troubleshooting",id:"validation-and-troubleshooting",level:2}];function c(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.admonition,{type:"tip",children:(0,r.jsx)(o.p,{children:"This feature is actively under development - let us know what else you would like to see!"})}),"\n",(0,r.jsxs)(o.p,{children:["If you are building a novel bioreactor on top of our software, you can use the ",(0,r.jsx)(o.code,{children:"~/.pioreactor/models"})," dir to add your own bioreactors. This metadata flows into the Inventory UI, safety interlocks, analytics, and can be consumed from Python via ",(0,r.jsx)(o.code,{children:"pioreactor.whoami.get_pioreactor_model()"}),"."]}),"\n",(0,r.jsx)(o.h2,{id:"directory-layout",children:"Directory layout"}),"\n",(0,r.jsxs)(o.ol,{children:["\n",(0,r.jsxs)(o.li,{children:["Create the models folder if it does not exist:","\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"mkdir -p ~/.pioreactor/models\n"})}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["Add one YAML file per model+version, for example ",(0,r.jsx)(o.code,{children:"~/.pioreactor/models/custom_100ml__v1_0.yaml"}),"."]}),"\n",(0,r.jsx)(o.li,{children:"Restart the Pioreactor UI to pick up the new definition."}),"\n",(0,r.jsxs)(o.li,{children:["Assign pioreactors to this new model on the Inventory UI page or via ",(0,r.jsx)(o.code,{children:"pio workers update-model ..."})," tool."]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"required-fields",children:"Required fields"}),"\n",(0,r.jsxs)(o.p,{children:["Each YAML is validated against ",(0,r.jsx)(o.code,{children:"pioreactor.structs.Model"}),", so include at least:"]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"model_name"}),": slug-style identifier (",(0,r.jsx)(o.code,{children:"custom_100ml"}),")."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"model_version"}),": semantic-ish version (",(0,r.jsx)(o.code,{children:'"1.0"'}),")."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"display_name"}),": friendly label shown in the Inventory."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"reactor_capacity_ml"}),": physical vessel size."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"reactor_max_fill_volume_ml"}),": operational maximum before spilling."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"reactor_diameter_mm"}),": used by stirring + growth-rate heuristics."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.code,{children:"max_temp_to_reduce_heating"}),", ",(0,r.jsx)(o.code,{children:"max_temp_to_disable_heating"}),", ",(0,r.jsx)(o.code,{children:"max_temp_to_shutdown"}),": temperature safety thresholds in \xb0C."]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"example-definition",children:"Example definition"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",metastring:'title="~/.pioreactor/models/custom_100ml.yaml"',children:'model_name: custom_100ml\nmodel_version: "1.0"\ndisplay_name: "Custom 100 mL, v1.0"\nreactor_capacity_ml: 100.0\nreactor_max_fill_volume_ml: 95.0\nreactor_diameter_mm: 50.0\nmax_temp_to_reduce_heating: 80.0\nmax_temp_to_disable_heating: 85.0\nmax_temp_to_shutdown: 90.0\n'})}),"\n",(0,r.jsx)(o.p,{children:"After saving the file, the Inventory page will list \u201cCustom 100 mL, v1.0\u201d in each unit\u2019s model dropdown. The same data becomes available to jobs and plugins:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"from pioreactor.whoami import get_pioreactor_model\n\nmodel = get_pioreactor_model()\nprint(model.display_name)\nprint(model.reactor_capacity_ml)\n"})}),"\n",(0,r.jsx)(o.h2,{id:"coordinating-with-hardware-profiles",children:"Coordinating with hardware profiles"}),"\n",(0,r.jsxs)(o.p,{children:["Model definitions describe intent (volumes, limits), while the hardware loader handles wiring, pin assignments, and sensor addresses. When you introduce a new model, you usually need a matching directory under ",(0,r.jsx)(o.code,{children:"~/.pioreactor/hardware/models/<model_name>/<model_version>/"})," so ",(0,r.jsxs)(o.a,{href:"/developer-guide/custom-hardware",children:[(0,r.jsx)(o.code,{children:"hardware.py"})," can layer the right YAMLs"]}),". Keeping the names and versions identical lets software map UI selections \u2192 hardware capabilities."]}),"\n",(0,r.jsx)(o.p,{children:"If you are basing your custom model off an existing Pioreactor model, can reuse the hardware for our Pioreactor models:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{children:"mkdir -p ~/.pioreactor/hardware/models/<model_name>/<model_version>\ncp ~/.pioreactor/hardware/models/pioreactor_40ml/1.5/* ~/.pioreactor/hardware/models/<model_name>/<model_version>\n\n"})}),"\n",(0,r.jsx)(o.h2,{id:"validation-and-troubleshooting",children:"Validation and troubleshooting"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["Run ",(0,r.jsx)(o.code,{children:"python -m pioreactor.models"})," to ensure your YAML parses; validation errors are also logged via the ",(0,r.jsx)(o.code,{children:"models"})," logger."]}),"\n",(0,r.jsxs)(o.li,{children:["If a model is missing from the dropdown, confirm the filename ends with ",(0,r.jsx)(o.code,{children:".yaml"}),"/",(0,r.jsx)(o.code,{children:".yml"}),", the process has read permissions, and the Pioreactor services have restarted."]}),"\n",(0,r.jsx)(o.li,{children:"Treat this directory like code: commit the YAMLs to version control alongside any CAD notes or lab SOPs so teammates understand the assumptions behind each model."}),"\n"]})]})}function m(e={}){const{wrapper:o}={...(0,n.a)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},11151:(e,o,i)=>{i.d(o,{Z:()=>l,a:()=>s});var r=i(67294);const n={},t=r.createContext(n);function s(e){const o=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(t.Provider,{value:o},e.children)}}}]);